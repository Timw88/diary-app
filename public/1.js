webpackJsonp([1],{112:function(t,e,n){var r=n(44)(n(327),n(329),null,null,null);t.exports=r.exports},115:function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(s(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var i=[],o=0;o<n.parts.length;o++)i.push(s(n.parts[o]));l[n.id]={id:n.id,refs:1,parts:i}}}}function o(){var t=document.createElement("style");return t.type="text/css",c.appendChild(t),t}function s(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(h)return v;r.parentNode.removeChild(r)}if(y){var s=p++;r=f||(f=o()),e=i.bind(null,r,s,!1),n=i.bind(null,r,s,!0)}else r=o(),e=a.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function i(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var s=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}function a(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var d="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(120),l={},c=d&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,h=!1,v=function(){},y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){h=n;var o=u(t,e);return r(o),function(e){for(var n=[],s=0;s<o.length;s++){var i=o[s],a=l[i.id];a.refs--,n.push(a)}e?(o=u(t,e),r(o)):o=[];for(var s=0;s<n.length;s++){var a=n[s];if(0===a.refs){for(var d=0;d<a.parts.length;d++)a.parts[d]();delete l[a.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},120:function(t,e){t.exports=function(t,e){for(var n=[],r={},o=0;o<e.length;o++){var s=e[o],i=s[0],a=s[1],d=s[2],u=s[3],l={id:t+":"+o,css:a,media:d,sourceMap:u};r[i]?r[i].parts.push(l):n.push(r[i]={id:i,parts:[l]})}return n}},132:function(t,e,n){function r(t){n(133)}var o=n(44)(n(135),n(136),r,"data-v-e3a6e37a",null);t.exports=o.exports},133:function(t,e,n){var r=n(134);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(115)("307c1b32",r,!0)},134:function(t,e,n){e=t.exports=n(108)(void 0),e.push([t.i,".dropzone[data-v-e3a6e37a]{border:2px dashed #bbb;border-radius:5px;padding:25px;text-align:center;font-size:1.2em;font-weight:700;color:#bbb}",""])},135:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45);!function(t){t&&t.__esModule}(r);e.default={props:["entryId"],methods:{dragover:function(t){},readFiles:function(t){for(var e=t.target.files||t.dataTransfer.files,n=0;n<e.length;n++)this.$store.dispatch("storeMedia",{entryId:this.entryId,blob:e[n]})}}}},136:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group dropzone",on:{drop:function(e){e.preventDefault(),t.readFiles(e)},dragover:function(e){e.preventDefault(),t.dragover(e)}}},[t._v("\n        DROP MEDA FILES HERE\n    ")])])},staticRenderFns:[]}},137:function(t,e,n){function r(t){n(138)}var o=n(44)(n(140),n(141),r,"data-v-0596b4f3",null);t.exports=o.exports},138:function(t,e,n){var r=n(139);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(115)("2695d00d",r,!0)},139:function(t,e,n){e=t.exports=n(108)(void 0),e.push([t.i,"img[data-v-0596b4f3]{max-width:250px}",""])},140:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["entryId","files"],methods:{destroy:function(t){var e=this;this.$store.dispatch("deleteMedia",{entryId:this.entryId,mediaId:t}).then(function(){e.$store.dispatch("getMedia",e.entryId)})}}}},141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.files,function(e){return t.files.length>0?n("div",{key:e.id,staticClass:"media mb-1"},[n("img",{staticClass:"d-flex mr-3",attrs:{src:e.attributes.url,alt:""}}),t._v(" "),n("div",{staticClass:"media-body"},[n("h6",{staticClass:"mt-0"},[t._v(t._s(e.attributes.name))]),t._v(" "),n("p",[n("small",[t._v("Added "+t._s(e.attributes.created_at))])]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(n){t.destroy(e.id)}}},[t._v("Delete File")])])]):t._e()}))},staticRenderFns:[]}},142:function(t,e,n){var r=n(44)(n(143),n(144),null,null,null);t.exports=r.exports},143:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["entryId","journalId"],methods:{destroy:function(){var t=this;this.$store.dispatch("deleteEntry",this.entryId).then(function(){t.$store.dispatch("getEntries",t.journalId);var e=t.journalId;t.$router.push({name:"journals.show",params:{journalId:e}})})}}}},144:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"btn btn-danger",on:{click:t.destroy}},[t._v("Delete")])},staticRenderFns:[]}},327:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(328),s=r(o),i=n(45),a=r(i),d=n(132),u=r(d),l=n(137),c=r(l),f=n(142),p=r(f);e.default={props:["journalId","entryId"],data:function(){return{title:"",content:""}},components:{FilesBag:u.default,FilesList:c.default,DeleteEntryButton:p.default},watch:{$route:"fetchData"},created:function(){this.fetchData(),this.$on("receivedEntry",function(t){this.updateSizeOfTextarea(),this.title=new a.default(this.$store.state.encryption_password).decrypt(t.attributes.title),this.content=new a.default(this.$store.state.encryption_password).decrypt(t.attributes.content)})},methods:{fetchData:function(){this.$store.dispatch("getEntry",this.entryId),this.$store.dispatch("getMedia",this.entryId)},updateSizeOfTextarea:function(){(0,s.default)(document.querySelector("textarea"))},update:function(t){this.updateSizeOfTextarea(),this.content=t.target.value},store:function(){var t=this;this.$store.dispatch("updateEntry",{entryId:this.entry.id,title:new a.default(this.$store.state.encryption_password).encrypt(this.title),content:new a.default(this.$store.state.encryption_password).encrypt(this.content)}).then(function(){t.$store.dispatch("getEntry",t.entryId),t.$store.dispatch("getEntries",t.journalId),t.$router.push({name:"entries.show",params:{journalId:t.journalId,entryId:t.entryId}})})}},computed:{files:function(){return this.$store.state.files},entry:function(){return null!=this.$store.state.entry&&this.$emit("receivedEntry",this.$store.state.entry),this.$store.state.entry}}}},328:function(t,e,n){var r,o,s;!function(n,i){o=[e,t],r=i,void 0!==(s="function"==typeof r?r.apply(e,o):r)&&(t.exports=s)}(0,function(t,e){"use strict";function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function r(){var e=t.style.height,r=n(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="auto";var s=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=s+"px",d=t.clientWidth,r.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){r();var n=Math.round(parseFloat(t.style.height)),o=window.getComputedStyle(t,null),s="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):t.offsetHeight;if(s!==n?"hidden"===o.overflowY&&(e("scroll"),r(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==o.overflowY&&(e("hidden"),r(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),u!==s){u=s;var a=i("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!s.has(t)){var a=null,d=t.clientWidth,u=null,l=function(){t.clientWidth!==d&&o()},c=function(e){window.removeEventListener("resize",l,!1),t.removeEventListener("input",o,!1),t.removeEventListener("keyup",o,!1),t.removeEventListener("autosize:destroy",c,!1),t.removeEventListener("autosize:update",o,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),s.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",c,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",o,!1),window.addEventListener("resize",l,!1),t.addEventListener("input",o,!1),t.addEventListener("autosize:update",o,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",s.set(t,{destroy:c,update:o}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function r(t){var e=s.get(t);e&&e.destroy()}function o(t){var e=s.get(t);e&&e.update()}var s="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,r){-1===t.indexOf(n)&&(t.push(n),e.push(r))},delete:function(n){var r=t.indexOf(n);r>-1&&(t.splice(r,1),e.splice(r,1))}}}(),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}),e.exports=a})},329:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-block"},[n("form",{on:{submit:function(e){e.preventDefault(),t.store(e)}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"This is the title of your entry"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("textarea",{staticClass:"form-control",attrs:{placeholder:"The content of your entry. **Markdown** is *supported*!"},domProps:{value:t.content},on:{focus:t.updateSizeOfTextarea,input:t.update}})]),t._v("\n\n            "+t._s(t.entry.attributes.id)+"\n\n            "),n("files-bag",{attrs:{files:t.files,entryId:t.entryId}}),t._v(" "),n("files-list",{attrs:{files:t.files,entryId:t.entryId}})],1)]),t._v(" "),n("div",{staticClass:"card-footer"},[n("button",{staticClass:"btn btn-success",on:{click:t.store,keyup:function(e){return("button"in e||31===e.keyCode)&&e.metaKey?void t.store(e):null}}},[t._v("Save")]),t._v(" "),n("delete-entry-button",{attrs:{entryId:t.entryId,journalId:t.journalId}})],1)])},staticRenderFns:[]}}});