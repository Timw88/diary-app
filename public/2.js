webpackJsonp([2],{112:function(e,t,n){var r=n(44)(n(322),n(324),null,null,null);e.exports=r.exports},117:function(e,t,n){function r(e){for(var t=0;t<e.length;t++){var n=e[t],r=l[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(s(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var i=[],o=0;o<n.parts.length;o++)i.push(s(n.parts[o]));l[n.id]={id:n.id,refs:1,parts:i}}}}function o(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function s(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(h)return v;r.parentNode.removeChild(r)}if(y){var s=p++;r=f||(f=o()),t=i.bind(null,r,s,!1),n=i.bind(null,r,s,!0)}else r=o(),t=a.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}function i(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,o);else{var s=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function a(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(120),l={},c=d&&(document.head||document.getElementsByTagName("head")[0]),f=null,p=0,h=!1,v=function(){},y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){h=n;var o=u(e,t);return r(o),function(t){for(var n=[],s=0;s<o.length;s++){var i=o[s],a=l[i.id];a.refs--,n.push(a)}t?(o=u(e,t),r(o)):o=[];for(var s=0;s<n.length;s++){var a=n[s];if(0===a.refs){for(var d=0;d<a.parts.length;d++)a.parts[d]();delete l[a.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},120:function(e,t){e.exports=function(e,t){for(var n=[],r={},o=0;o<t.length;o++){var s=t[o],i=s[0],a=s[1],d=s[2],u=s[3],l={id:e+":"+o,css:a,media:d,sourceMap:u};r[i]?r[i].parts.push(l):n.push(r[i]={id:i,parts:[l]})}return n}},132:function(e,t,n){function r(e){n(133)}var o=n(44)(n(135),n(136),r,"data-v-e3a6e37a",null);e.exports=o.exports},133:function(e,t,n){var r=n(134);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(117)("307c1b32",r,!0)},134:function(e,t,n){t=e.exports=n(108)(void 0),t.push([e.i,".dropzone[data-v-e3a6e37a]{border:2px dashed #bbb;border-radius:5px;padding:25px;text-align:center;font-size:1.2em;font-weight:700;color:#bbb}",""])},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={props:["files","entryId"],methods:{showMessage:function(e){},readFiles:function(e){for(var t=e.target.files||e.dataTransfer.files,n=0;n<t.length;n++)this.createImage(t[n]),this.$store.dispatch("storeMedia",{entryId:this.entryId,blob:t[n]})},createImage:function(e){var t=this,n=new FileReader,r=this;n.onload=function(n){r.files.push({uri:n.target.result,uri_encrypted:new o.default(t.$store.state.encryption_password).encrypt(n.target.result),last_modified:e.lastModified,name:e.name,size:e.size,type:e.type})},n.readAsDataURL(e)}}}},136:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-group dropzone",on:{drop:function(t){t.preventDefault(),e.readFiles(t)},dragover:function(t){t.preventDefault(),e.showMessage(t)}}},[e._v("\n        DROP IMAGES HERE\n    ")])])},staticRenderFns:[]}},137:function(e,t,n){var r=n(44)(n(138),n(139),null,null,null);e.exports=r.exports},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["entryId","journalId"],methods:{destroy:function(){var e=this;this.$store.dispatch("deleteEntry",this.entryId).then(function(){e.$store.dispatch("getEntries",e.journalId);var t=e.journalId;e.$router.push({name:"journals.show",params:{journalId:t}})})}}}},139:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"btn btn-danger",on:{click:e.destroy}},[e._v("Delete")])},staticRenderFns:[]}},322:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(323),s=r(o),i=n(45),a=r(i),d=n(132),u=r(d),l=n(137),c=r(l);t.default={props:["journalId","entryId"],data:function(){return{title:"",content:"",files:[]}},components:{FilesBag:u.default,DeleteEntryButton:c.default},watch:{$route:"fetchData"},created:function(){this.fetchData(),this.$on("receivedEntry",function(e){this.updateTextarea(),this.title=new a.default(this.$store.state.encryption_password).decrypt(e.attributes.title),this.content=new a.default(this.$store.state.encryption_password).decrypt(e.attributes.content)})},methods:{fetchData:function(){this.$store.dispatch("getEntry",this.entryId)},updateTextarea:function(){(0,s.default)(document.querySelector("textarea"))},update:function(e){this.updateTextarea(),this.content=e.target.value},store:function(){var e=this;this.$store.dispatch("updateEntry",{entryId:this.entry.id,title:new a.default(this.$store.state.encryption_password).encrypt(this.title),content:new a.default(this.$store.state.encryption_password).encrypt(this.content)}).then(function(){e.$router.push({name:"entries.show",params:{journalId:e.journalId,entryId:e.entryId}})})}},computed:{entry:function(){return null!=this.$store.state.entry&&this.$emit("receivedEntry",this.$store.state.entry),this.$store.state.entry}}}},323:function(e,t,n){var r,o,s;!function(n,i){o=[t,e],r=i,void 0!==(s="function"==typeof r?r.apply(t,o):r)&&(e.exports=s)}(0,function(e,t){"use strict";function n(e){function t(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function n(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function r(){var t=e.style.height,r=n(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var s=e.scrollHeight+a;if(0===e.scrollHeight)return void(e.style.height=t);e.style.height=s+"px",d=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){r();var n=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),s="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(s!==n?"hidden"===o.overflowY&&(t("scroll"),r(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(t("hidden"),r(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),u!==s){u=s;var a=i("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var a=null,d=e.clientWidth,u=null,l=function(){e.clientWidth!==d&&o()},c=function(t){window.removeEventListener("resize",l,!1),e.removeEventListener("input",o,!1),e.removeEventListener("keyup",o,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",o,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),s.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o,!1),window.addEventListener("resize",l,!1),e.addEventListener("input",o,!1),e.addEventListener("autosize:update",o,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",s.set(e,{destroy:c,update:o}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),a="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function r(e){var t=s.get(e);t&&t.destroy()}function o(e){var t=s.get(e);t&&t.update()}var s="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,r){-1===e.indexOf(n)&&(e.push(n),t.push(r))},delete:function(n){var r=e.indexOf(n);r>-1&&(e.splice(r,1),t.splice(r,1))}}}(),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(e){return e},a.destroy=function(e){return e},a.update=function(e){return e}):(a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e},a.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.exports=a})},324:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-block"},[n("form",{on:{submit:function(t){t.preventDefault(),e.store(t)}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"This is the title of your entry"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("textarea",{staticClass:"form-control",attrs:{placeholder:"The content of your entry. **Markdown** is *supported*!"},domProps:{value:e.content},on:{focus:e.updateTextarea,input:e.update}})]),e._v("\n\n            "+e._s(e.entry.attributes.id)+"\n\n            "),n("files-bag",{attrs:{files:e.files,entryId:e.entryId}}),e._v(" "),e._l(e.files,function(t,r){return n("div",{key:r,staticClass:"media"},[n("img",{staticClass:"d-flex mr-3",attrs:{src:t.uri,alt:""}}),e._v(" "),n("div",{staticClass:"media-body"},[n("button",{staticClass:"btn btn-danger",on:{click:function(n){n.preventDefault(),e.files.splice(t,1)}}},[e._v("\n                        Remove image\n                    ")])])])})],2)]),e._v(" "),n("div",{staticClass:"card-footer"},[n("button",{staticClass:"btn btn-success",on:{click:e.store,keyup:function(t){return("button"in t||31===t.keyCode)&&t.metaKey?void e.store(t):null}}},[e._v("Save")]),e._v(" "),n("delete-entry-button",{attrs:{entryId:e.entryId,journalId:e.journalId}})],1)])},staticRenderFns:[]}}});